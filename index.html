<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>BANKBOOKZ&#8482;</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="./favicon.ico" />
        <script type="text/javascript"
            src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
<style>
    body{ background:black; color:steelblue; font-size: 1em;padding: 1em 2% 2% 2%;
        font-family: verdana;height: 100%; min-height: 100%; display: flex;
        flex: 1;flex-direction: column; margin-top:2em;user-select:none;
    }   
    /* FRAME *******************************FRAME*****************************/
    .FRAME{ border:solid 1px steelblue;box-shadow: 1px 1px 3px 0px steelblue;
        border-radius: 10px;padding: 2%;margin: 0.333em;
    }
    .BTN {color:aqua;background:#000033;border:solid 1px seagreen;
        text-align: center;border-radius:13px;box-shadow: 1px 1px 1px teal;
        cursor:pointer;height: 1.444em;
    }
    .BTN:hover{color:lime;border:solid 1px lime;}
    .BTN:active{color:cyan;background:blue;border:solid 1px teal;box-shadow:1px 1px 1px black;}    
    .BTN.selectedBTN{color:cyan;background:darkblue;border:solid 1px teal;}
    /* BTN **********************************BTN**************************/
    /* .BTN{background:grey;border-radius: 8px;border:solid 1px darkslateblue;font-size:0.888em;
        cursor:pointer;color:cyan;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;} */
    .blackBTN{border-radius: 13px;background:black;cursor: pointer;font-size: 0.777em;
        color: aqua;line-height: 2;box-shadow:1px 1px 1px aqua; }
    /**************RESPONSIVE BTN *******************/
    /* .BTN:hover{border:1px solid steelblue; color:purple}
    .BTN:active{border:1px solid lime; color:green} */
    .blackBTN:hover{border:1px solid lime;  background:black;  color:green}
    .blackBTN:active{border:1px solid steelblue;  background:black; color:purple}
    @media only screen and (max-width: 800px) { /************* TABLET */
        body{  background-color: #00070d;}
        .BTN{font-size:1.111em;}
        /* .blackBTN{font-size:0.999em;} */
    }  
    @media only screen and (max-width: 500px) { /************* PHONE */
        body{ background-color: #07000c; }
        .BTN{font-size:1em;}
        .blackBTN{font-size:1em;}
    }
    /* ***********************************CUSTOM SCROLLBAR****************************/
    .scrollBarV {overflow-x:scroll;}
    .scrollBarV::-webkit-scrollbar-track { background-color: #010213;  border-radius: 13px; }
    .scrollBarV::-webkit-scrollbar { width: 0.666em; height: 100%; }
    .scrollBarV::-webkit-scrollbar-thumb { background-color: #04223c; border-radius: 13px;
        background-image: -webkit-linear-gradient(0deg, rgba(255, 255, 255, 0.6) 26%, transparent 26%, transparent 51%, rgba(255, 255, 255, -0.4) 51%, rgba(255, 255, 255, 0.6) 74%, transparent 74%, transparent);
    }  
    /*******CUSTOM MAIN MENU *******************MAIN MENU*********************************/
    .MAIN_MENU {background:rgb(72, 80, 111);border:solid 1px rgb(0, 128, 45);border-radius: 13px;
        padding:0.666em 1em 0.666em 1em;box-shadow: inset 0px 3px 10px purple;
        display: flex;justify-content: space-evenly;max-width: 80%;margin: -1em auto 1.111em auto;
        font-size: 0.666em;padding: 0.444em;display: flex;flex:0;
    } 
    .hiddenTab{ display:none !important;}
    /* CUSTOM HR ***************************HR***********************/
    hr {border-top:solid 1px steelblue; border-bottom: none; border-radius: 2px;}    
    /* CUSTOM INPUT ***************************INPUT***********************/
    .inputELEM { border-radius: 13px;text-align: center;background: darkslategrey;
        color: cyan;margin-right:1em;width:7em;padding: 0;font-size:0.888em;
    }
    /* END CUSTOM INPUT ***************************END INPUT***********************/
    /*******END CUSTOM MAIN MENU *******************MAIN MENU*********************************/
    /* CUSTOM TITLES ***************************TITLES***********************/
    .mainTitle {font-size: 1.444em;display:flex;justify-content: space-between; padding: 0em 1em 0 1em;
        text-shadow: -8px -1px 8px blue;}
    /* CUSTOM EXPANDER ***************************EXPANDER***********************/
    .expanderROW {display:flex;justify-content:space-between;padding: 0.444em 1em 0.444em 1em;border-bottom:1px dashed #021d33}
    .expanderTITLE{font-size:0.888em;color:steelblue;    margin-top: 0.333em;}
    .expanderBTN {color:aqua;background:#000033;border:solid 1px seagreen;
        width: 1.444em;text-align: center;border-radius: 50%;box-shadow: 1px 1px 1px teal;
        cursor:pointer;height: 1.444em;
    }
    .expanderBTN:hover{color:cyan;background:darkblue;border:solid 1px teal;}
    .expanderBTN:active{color:cyan;background:blue;border:solid 1px teal;box-shadow:1px 1px 1px black;
    }
    /** END CUSTOM EXPANDER ******************END EXPANDER*********************************************/   
    /**  **************************SELECTOR*************************************/
    .chartBTN {background:steelblue;border-radius: 10px;border: 1px solid orangered;
        padding: 0.666%;}
    .chartBTN:hover{color:aqua;background:black;}
    .chartSELECTOR {background:black; color:steelblue;border-radius: 10px;border: 1px solid aqua;
        padding: 0.333%;}
    .chartSELECTOR:hover{color:aqua;background:black;}
    .chartSELECTOR:focus {border-color: teal;
    }/* focus border */
    .chartSELECTOR:focus option:checked {background-color:black;color:limegreen;
    } /* focused item */
    .chartSELECTOR:focus-visible{outline-color: teal;
    } /* focused item */
    /**  *************************END SELECTOR**************************************/      
    /** CUSTOM TV CHARTS *********************CHARTS******************************************/    
    .tv-lightweight-charts{ margin: 1em 0 1em 0; border-radius:13px;}
    /** END  TV CHARTS *************************CHARTS**************************************/   
    /** API ***************************************************************/
    #keyBOX{ margin:1%;border: solid 1px steelblue;font-size: 0.777em;}
    #keyINPUT:-webkit-autofill { -webkit-box-shadow: 0 0 0px 1000px #233453 inset;}
    /** END API ***************************************************************/ 
    /** VIEW IMPLEMENTATIONS ***************************************************/   
    .tkrROWZ{margin: 1%; width:92%; border:solid 1px steelblue; display: flex;justify-content: space-between;
        border-radius:18px;padding: 0 3% 0 3%; align-items: center; flex-wrap: wrap;
    }    
    /** END VIEW IMPLEMENTATIONS *****************************************/   
</style>      
</head>
<body class="scrollBarV">
    <header style="position:absolute;top:0.555em;align-self:center;display:flex;">
        BANKBOOKZ<span style="font-size:0.444em">&#8482;</span></header>
    <menu class="MAIN_MENU">
        <button id="TCKR_VIEW_BTN" class="BTN" style="margin:0 0em 0 0em;" onclick="go_TICKR_VIEW()">TICKRZ</button>
        <button id="BANK_VIEW_BTN" class="BTN" style="margin:0 1em 0 1em;" onclick="go_BANK_VIEW()">BANKZ</button>
        <button id="BOOK_VIEW_BTN" class="BTN" style="margin:0 0em 0 0em;" onclick="go_BOOK_VIEW()">BOOKZ</button>
        <button id="DATA_VIEW_BTN" class="BTN" style="margin:0 1em 0 1em;" onclick="go_DATA_VIEW()">DATA</button>
    </menu>
    <section id="TCKR_VIEW" class=" hiddenTab" style="flex:1;border-radius: 13px; border: solid 1px steelblue; 
        box-shadow: inset 1px 1px 11px 0px cyan; padding:2%;padding-top: 3%;padding-left:4%; color: cyan;line-height:1.666em;">
        <header class="mainTitle expanderROW">
            <span class="boxTitle">
                <span style="font-size:0.777em; color:cyan">1</span>
                <span>TICKERS</span>
                <!-- <span class="expanderBTN" style="font-size:0.777em;" onclick="expander_BOOKZ_Click(event)">✧</span> -->
            </span>
        </header>
        <hr/>
        <article id="TKR_RENDER_FRAME"></article>
        <hr/>
        <menu style="display: flex;justify-content: flex-end; padding-right: 2%;">
            <button id="addTickBtn1" class="blackBTN" onclick="add_TKRZ_Click()">add🎇</button>
            <button id="saveTickBtn1" class="blackBTN" style="margin-left:1em;" onclick="saveTickerClick()">save🌟</button>
        </menu>
    </section><!-- END TCKR VIEW-->
    <section id="BANK_VIEW" class=" hiddenTab" 
        style="flex: 1;border-radius: 13px;border: solid 1px steelblue;box-shadow: inset 1px 1px 11px 0px #00ffa5;
            padding: 2%;padding-top: 3%;padding-left: 4%; color: cyan;line-height: 1.666em;">
        <article class="mainTitle expanderROW">
            <span class="boxTitle" style="width:100%;">
                <span></span><span style="font-size:0.777em; color:cyan">2</span>
                MARGINZ</span>
            </span>
            <button class="expanderBTN" style="padding:0;font-size:0.777em;line-height: 1.444em;" 
                onclick="expander_BANKZ_Click(event)">✧</button>
        </article>
        <hr> 
        <article id="MARGINZ_RENDER_FRAME"></article>
        <hr> 
        <button id="detailsBtn1" class="blackBTN" onclick="setMarginDetailsClick(event)">details💎</button> 
    </section><!-- END BANKZ VIEW -->
    <!-- *********************************BOOKZ_-VIEW********************************-->
    <section id="BOOK_VIEW" style="border:solid 1px steelblue;justify-content: center;flex-direction: column;
        border-radius: 13px;display:flex; padding:3%;flex:1;box-shadow:inset 1px 3px 13px 0px steelblue;">
        <article id="BOOKZ_RENDER_FRAME"></article>
        <hr> 
        <!-- <button id="detailsBtn1" class="blackBTN" onclick="setMarginDetailsClick(event)">details💎</button>  -->

        <section id="BOOKFRAME_XMPL" class="BOOKFRAME_Item">
            <header class="mainTitle expanderROW">
                <span>XMPL</span>
                <span class="expanderBTN" style="font-size:0.777em;" onclick="expander_BOOKZ_Click(event)">✧</span>
            </header>
            <menu style="justify-content: space-evenly; border-radius: 13px; flex: 1 1 0%; display: flex; 
                margin-top: 0;padding: 0.222em 0px; width: 66.666%; align-self: center;">
                <span>
                    <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                    margin-right: 0.5em;"></div>
                    <span style="font-size:0.444em;">PRICE</span>
                </span>
                <span>
                    <div style="background:#2962ff;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                    margin-right: 0.5em;"></div>
                    <span style="font-size:0.444em;">PROFITnLOSS</span>
                </span>
            </menu>
            <article id="candelstickFRAME_XMPL" style="justify-content:center;
                flex:1; display:flex;border:solid 1px steelblue;border-radius:22.222px;width:98%">
            </article>
            <section style="justify-content: center;margin-top:1em;flex-direction: column; padding:0 2% 0 2%;
            border-radius: 13px; flex:1; display:flex;border:solid 1px teal;width:90%;align-self:center;">
                <header class="expanderROW">
                    <span class="expanderTITLE">PnL:</span>
                    <span class="expanderBTN" onclick="MINMAX(event.target)">✧</span>
                </header>
                <article id="baselineFRAME_XMPL" style="justify-content: center;
                flex:1; display:flex;">
                </article>
                <header style="font-size: 0.888em;margin-bottom:1em;display:flex;justify-content: space-between; padding: 2em 3em 0 2em">
                    <span>
                        <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                        margin-right: 0.5em;"></div>                        
                        <span style="font-size:0.666em;margin-top: 0.333em;color:steelblue">PnL:</span>
                        <span style="font-size:0.666em;">234</span>
                    </span>
                    <span>
                        <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                        margin-right: 0.5em;"></div>
                        <span style="font-size:0.666em;">BOOK:</span>
                        <span style="font-size:0.666em;">1,234</span>
                    </span>
                    <span>
                        <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                        margin-right: 0.5em;"></div>
                        <span style="font-size:0.666em;">BANK:</span>
                        <span style="font-size:0.666em;">444</span>
                    </span>
                </header>                  
            </section>            
            <menu id="selectorFRAME_XMPL" class="FRAME" style="align-items: center;
                border-radius: 13px; flex:1; display:flex; width:82.222%;margin: 0.666em auto;">
                <select style="max-height:2em;margin: 0 1em;" class="chartSELECTOR"
                    onclick="getDataSelector(event.target)">
                    <option value="true" selected>2024_10_NVDA</option>
                    <option value="false">2023_11_AMZN</option>
                    <option value="false">2022_20_COIN</option>
                </select>
                <aside id="selectorVIEW_XMPL" style="border: solid 1px steelblue;border-radius: 13px;
                    padding: 1%;flex: 1"> </aside>
                <!-- <button class="BTN">Btn1</button>
                <button class="BTN">Btn2</button>
                <button class="BTN">Btn3</button> -->
            </menu>
            <menu id="dataFRAME_XMPL" class="FRAME" style="justify-content: center;
                border-radius: 13px; flex:1; display:flex;flex-direction: column;">
                <header class="expanderROW">
                    <span class="expanderTITLE">METADATA:</span>
                    <span class="expanderBTN" onclick="MINMAX(event.target)">✴</span>
                </header>
                <section style="display:none;">...</section>
            </menu>
        </section><!--***********************************************end BOOKFRAME-->     
    </section><!--end BOOKVIEW-->

    <section id="DATA_VIEW" style="border:solid 1px steelblue;justify-content: center;flex-direction: column;
    border-radius: 13px; flex:1; height:10em; display:flex; padding:0 3% 2% 3%;max-width: 800px;margin:0 10%;
    box-shadow: 1px 3px 13px 0px steelblue;align-self:center; width:88.888%;" class="hiddenTab">
            <!-- <menu style="display:flex;margin: 0;justify-content: flex-start;height: 3em;font-size:0.666em;">
                <button class="BTN" style="" 
                    onclick="go_DATA_GALLERY_FRAME('${EDIT_YMT_RECORD_ID}')">GALLERY</button>
                <button class="BTN" style="" 
                    onclick="go_DATA_IMPORT_FRAME('${EDIT_YMT_RECORD_ID}')">IMPORT</button>
            </menu> -->
        <article id="DATA_GALLERY_FRAME">
            <menu style="display:flex;flex-wrap: wrap;font-size: 0.999em;padding-left:0;
                justify-content: space-evenly;border-bottom: 1px dashed #021d33;padding-bottom: 0.666em;">
                <!-- <button class="BTN" style="" 
                    onclick="go_DATA_GALLERY_FRAME('${EDIT_YMT_RECORD_ID}')">GALLERY</button>
                <button class="BTN" style="" 
                    onclick="go_DATA_IMPORT_FRAME('${EDIT_YMT_RECORD_ID}')">IMPORT</button>                 -->
                    <!-- <button class="BTN" style="" 
                        onclick="getDataGallery('edit')">EDIT_DATA</button> -->
                <button class="blackBTN" onclick="getDataGallery('tickr')">TKR_DATA</button>
                <button class="blackBTN" onclick="getDataGallery('trade')">TRADE_DATA</button>
                <button class="blackBTN" onclick="getDataGallery('import')">IMPORT</button>
            </menu>
            <main id="data_gallery_list"></main>
        </article>        

        <article id="DATA_TKR_FRAME" style="height:10em; border:solid 1px steelblue;border-radius:10px;" class="">tkr</article>        
        <article id="DATA_TRADE_FRAME" style="height:10em; border:solid 1px steelblue;border-radius:10px;" class="hiddenTab">trade</article> 
        <article id="DATA_IMPORT_FRAME" style="height:10em; border:solid 1px steelblue;border-radius:10px;" class="hiddenTab">import</article>        
        <article id="DATA_EDIT_FRAME" style="height:10em; border:solid 1px steelblue;border-radius:10px;" class="hiddenTab" >edit
            <textarea id="editTXTz" style="resize:vertical;height:80%;width:90%;line-height:2.222em;
                background:black;color:lime;width: 91%;padding: 4%; border-radius: 13px;height:500px;">
                Loading... </textarea>
             <button class="BTN" style="margin:0.444em 1em 1em 1em;" 
                onclick="getDataGallery('edit')">go edit</button>
            
        </article>

       

    </section><!--end DATAVIEW-->


<script async defer>// *************LOCAL_DB*********************
/*************************************************************\
 * bankbookz_DB - ability to save monthly data in localstorage
\*************************************************************/
let bankbookz_DB=null;
const bankbookz_DB_LOAD_MOCK_DATA=()=>{ //INIT DATA_MODEL XMPL
    bankbookz_DB = { 
        // ymt_MonthlyMap:{"2020_1_BTC":[
        TRADE_TXNZ_YMT:{"2020_1_BTC":[ //Monthly trade data
            {"tkr":"BTC","type":"BUY","mode":"Limit","ymd":"2020_4_3","ymtID":"2020_4_BTC",
                "amt":"111","shares":"0.0017","price":"64,428.71","role":""}
        ]},
        // TICKR_DATA_API_RAW:[],
        TICKR_DATA_YMT:{"2020_1_BTC":[ //Monthly market data

        ]},
        TICKR_LIST:[//{name:'XMPL',lastLoadYMD:''},
            {name:'BTC',lastLoadYMD:''},{name:'ETH',lastLoadYMD:''}
        ],
        METASTATE:{ 
            BOOKZ_EXPANDER:['BTC'] //multiple expansion.
            // CHART_SELECTOR_YMT:[],
        } 
    }
}
const bankbookz_DB_init=()=>{ //READ from LOCAL STORAGE
    try{
        bankbookz_DB = (localStorage.bankbookz_DB)?
        JSON.parse( localStorage.bankbookz_DB ):null;
        bankbookz_DB = null; //DEV: load mock data for TEST
        if(!bankbookz_DB){ bankbookz_DB_LOAD_MOCK_DATA(); }
    } catch(e){ bankbookz_DB_LOAD_MOCK_DATA(); }
}; bankbookz_DB_init();
function save_BANKBOOKZ_DB(){ //singleton, save LocalDB;.
    // debugger;
    //localStorage.bankbookz_DB = JSON.stringify(bankbookz_DB); //SAVE to LOCAL STORAGE 
}
</script><!--***********************END LOCAL DB*********************-->
<script async defer>// *************APP UTILITIES*********************
//*************************************************CUSTOM MINMAX***********
function MINMAX(TGT, setState){ 
    //setState optional to force expand or collapse, otherwise toggle.
    //get parent and hide/show everything but expanderROW
    const CURR_STATE = TGT.innerHTML;
    const ROW = TGT.parentElement; //required
    if(ROW.classList.contains("expanderROW")){ //if row hide siblings.
        let aSibling = ROW.nextElementSibling;
        while (aSibling) { //loop next siblings
            if(CURR_STATE==='✴'||setState){ //COLLAPSE
                aSibling.style.display = 'flex'; //required
            } else { aSibling.style.display = 'none'; 
            }//EXPAND (default)
            aSibling = aSibling.nextElementSibling;
        }
        TGT.innerHTML = (CURR_STATE==='✴'||setState) ? '✧' : '✴';
    }
}
//*************************************************END MINMAX***********
//---*************CUSTOM CHART_SELECTOR------------------
function getDataSelector(e){
    let TGT = e.target;
    const selectedIndex = TGT.selectedIndex;
    if (selectedIndex !== -1) {
        const selectedOption = TGT.options[selectedIndex];
        console.log("Selected value:", selectedOption.value);
        console.log("Selected text:", selectedOption.text);
    } else {
        console.log("No option selected.");
    }
}
    // const ymt_SELECTOR = document.getElementById('ymt_SELECTOR');
    // const selectionOutput = document.getElementById('selectionOutput');
    // ymt_SELECTOR.addEventListener('change', ()=>{
        // getRandomData(initialDateStr, barData);
        // updateTKRChart1();      
        // updateSelections();   
        // getDataForChart();
        // updateTKRChart2();      
    // });
    // const reset_SELECTOR = ()=>{
    //     ymt_SELECTOR.innerHTML = ""; //clear children
    //     bankbookz_DB = JSON.parse(localStorage.bankbookz_DB); //update
    //     let dataKeys = Object.keys(bankbookz_DB.ymt_MonthlyMap);
    //     let options, dataKey;
    //     for(var i=0;i<dataKeys.length;i++){
    //         dataKey = dataKeys[i];
    //         options = document.createElement("option");
    //         options.value = dataKey; options.text = dataKey;
    //         ymt_SELECTOR.appendChild(options);
    //     }
    //     let selectNone = document.createElement("option");
    //     selectNone.value = '...'; selectNone.text = '...';
    //     selectNone.selected = true;
    //     ymt_SELECTOR.appendChild(selectNone);
    // }; reset_SELECTOR();
    // ********************END CHART SELECTOR

</script><!--***********END APP UTILITIES *********************-->
<script async defer>// ********************MAIN DYNAMIC CHART**********************
let DYNA_CHART_CANDLES = []; //for screen resize
function init_DYNA_CHART_Candle(tgtELEM){
    const chartOptions = {width:400,height:300,layout:{textColor:'steelblue',background:{type:'solid',color:'#000000'} },
        grid: { vertLines: { color: "#222" }, horzLines: { color: "#282828" } },
        crosshair:{mode:LightweightCharts.CrosshairMode.Normal,vertLine:{color:"darkslategrey"},horzLine:{color:"darkslategrey"} },
        rightPriceScale:{visible:true,},leftPriceScale:{visible:true},
    }
    tgtELEM.innerHTML=''; //blank out
    const Dyna_Chart_CandleStick = 
        LightweightCharts.createChart(tgtELEM, chartOptions);
    //AREA-SERIES******************************************************
    const areaSeries = Dyna_Chart_CandleStick.addAreaSeries({
        lineColor:'#2962FF',topColor:'#2962FF',bottomColor:'rgba(41, 98, 255, 0.28)',layout:{ textColor: 'steelblue', 
        background: { type: 'solid', color: '#000000' } }, pointMarkersVisible:true, pointMarkersRadius:4
    });
    areaSeries.setData([
        { time: '2018-12-22', value: 232.51 },{ time: '2018-12-23', value: 331.11 },
        { time: '2018-12-24', value: 227.02 },{ time: '2018-12-25', value: 327.32 },
        { time: '2018-12-26', value: 225.17 },{ time: '2018-12-27', value: 328.89 },
        { time: '2018-12-28', value: 225.46 },{ time: '2018-12-29', value: 323.92 },
        { time: '2018-12-30', value: 222.68 },{ time: '2018-12-31', value: 322.67 },
    ]);
    //END: AREA-SERIES******************************************************        
    // CANDLESTICK-SERIES******************************************************        
    const candlestickSeries = Dyna_Chart_CandleStick.addCandlestickSeries({
        priceScaleId: 'left', layout: {textColor:'steelblue',background: { type: 'solid', color: '#000000' } },
        wickUpColor: "#26a69a",upColor: "#26a69a",wickDownColor: "rgb(225, 50, 85)",downColor: "rgb(225, 50, 85)",
    });
    candlestickSeries.setData([
        {time: '2018-12-22', open: 7511.16, high: 8211.84, low: 3611.16, close: 4511.72 },{time: '2018-12-23', open: 4511.12, high: 5311.90, low: 4511.12, close: 4811.09 },
        {time: '2018-12-24', open: 6011.71, high: 6011.71, low: 5311.39, close: 5911.29 },{time: '2018-12-25', open: 6811.26, high: 6811.26, low: 5911.04, close: 6011.50 },
        {time: '2018-12-26', open: 6711.71, high: 10511.85, low: 6611.67, close: 9111.04 },{time: '2018-12-27', open: 9111.04, high: 12111.40, low: 8211.70, close: 11111.40 },
        {time: '2018-12-28', open: 11111.51, high: 14211.83, low: 10311.34, close: 13111.25 },{time: '2018-12-29', open: 13111.33, high: 15111.17, low: 7711.68, close: 9611.43 },
        {time: '2018-12-30', open: 10611.33, high: 11011.20, low: 9011.39, close: 9811.10 },{time: '2018-12-31', open: 10911.87, high: 11411.69, low: 8511.66, close: 11111.26 },
    ]);
    Dyna_Chart_CandleStick.timeScale().fitContent();    
    resize_DYNA_CHART_Candle(Dyna_Chart_CandleStick);
    DYNA_CHART_CANDLES.push(Dyna_Chart_CandleStick); //for screen resize
}; //END INIT DYNA_CHART - candle
function resize_DYNA_CHART_Candle(elem){
    let frame = document.getElementById('BOOK_VIEW');
    let maxWidth = (frame.offsetWidth>800)?700:(frame.offsetWidth<400)?frame.offsetWidth-40:frame.offsetWidth-80;//(frame.offsetWidth*0.1);
    let maxHeight = (frame.offsetWidth>800)?600:frame.offsetWidth-200;
    if(maxWidth<100 || maxHeight<50){return}
    elem.resize(maxWidth, maxHeight);
}
//*************************************************END DYNA CHART CHART***********

//******DYNA CHART - BASELINE*****************************************
let DYNA_CHART_BASELINES = []; //for screen resize
function init_DYNA_CHART_Baseline(tgtELEM){
    const chartOptions = { width:300,height:100,
        layout: { textColor: 'white', background: { type: 'solid', color: 'black' } },
        grid: { vertLines: { color: "#222" }, horzLines: { color: "#282828" } }, 
    };
    tgtELEM.innerHTML='';
    let Dyna_Chart_Baseline = LightweightCharts.createChart(tgtELEM, chartOptions);
    const baselineSeries = Dyna_Chart_Baseline.addBaselineSeries({ baseValue: { type: 'price', price: 25 }, topLineColor: 'rgba( 38, 166, 154, 1)', topFillColor1: 'rgba( 38, 166, 154, 0.28)', topFillColor2: 'rgba( 38, 166, 154, 0.05)', bottomLineColor: 'rgba( 239, 83, 80, 1)', bottomFillColor1: 'rgba( 239, 83, 80, 0.05)', bottomFillColor2: 'rgba( 239, 83, 80, 0.28)' });
    const data = [{ value: 1, time: 1642425322 }, { value: 8, time: 1642511722 }, { value: 10, time: 1642598122 }, { value: 20, time: 1642684522 }, { value: 3, time: 1642770922 }, { value: 43, time: 1642857322 }, { value: 41, time: 1642943722 }, { value: 43, time: 1643030122 }, { value: 56, time: 1643116522 }, { value: 46, time: 1643202922 }];
    baselineSeries.setData(data);
    Dyna_Chart_Baseline.timeScale().fitContent();
    resize_DYNA_CHART_Baseline(Dyna_Chart_Baseline);
    DYNA_CHART_BASELINES.push(Dyna_Chart_Baseline); //for screen resize    
}; //END INIT DYNA_CHART - baseline
function resize_DYNA_CHART_Baseline(elem){
    let frame = document.getElementsByClassName('dynamicBaseline')[0]
    let maxWidth = (frame.offsetWidth>700)?700:(frame.offsetWidth<700)?frame.offsetWidth-40:frame.offsetWidth-60;//(frame.offsetWidth*0.1);
    let maxHeight = 100;//(frame.offsetWidth>800)?600:frame.offsetWidth-200;  
    if(maxWidth<100){return}
    elem.resize(maxWidth, maxHeight);
}; 
//*************************************************END DYNA-CHART BASELINE***********
//******************************SCREEN RESIZE - DYNA CHART***********
window.addEventListener('resize', () => { //for SCREEN RESIZE - CANDLE CHARTS
    for(var j=0; j<DYNA_CHART_CANDLES.length;j++){
        tgtTKR = DYNA_CHART_CANDLES[j];
        resize_DYNA_CHART_Candle(tgtTKR)
    }  
    for(var j=0; j<DYNA_CHART_BASELINES.length;j++){
        tgtTKR = DYNA_CHART_BASELINES[j];
        resize_DYNA_CHART_Baseline(tgtTKR)
    }  
});
//******************************SCREEN RESIZE - DYNA CHART***********

</script><!--****************************END DYNAMIC CHART-->
<script async defer>// ****************************** XMPL CHART**********************
let candlestickChart1;
function initCandleChart1(){
    const chartOptions = { width: 400, height: 300, 
        layout: { textColor: 'steelblue', background: { type: 'solid', color: '#000000' } },
        grid: { vertLines: { color: "#222" }, horzLines: { color: "#282828" } },
        crosshair: { mode: LightweightCharts.CrosshairMode.Normal ,
            vertLine: { color: "darkslategrey" },
            horzLine: { color: "darkslategrey" },
        },
        rightPriceScale:{visible:true,},leftPriceScale:{visible:true},
    }
    candlestickChart1 = LightweightCharts.createChart(
        document.getElementById('candelstickFRAME_XMPL'), chartOptions);
    //AREA-SERIES******************************************************
    const areaSeries = candlestickChart1.addAreaSeries({
        lineColor: '#2962FF', topColor: '#2962FF',
        bottomColor: 'rgba(41, 98, 255, 0.28)',layout: { textColor: 'steelblue', 
        background: { type: 'solid', color: '#000000' } } ,
        pointMarkersVisible:true, pointMarkersRadius:4
    });
    areaSeries.setData([
        { time: '2018-12-22', value: 232.51 },{ time: '2018-12-23', value: 331.11 },
        { time: '2018-12-24', value: 227.02 },{ time: '2018-12-25', value: 327.32 },
        { time: '2018-12-26', value: 225.17 },{ time: '2018-12-27', value: 328.89 },
        { time: '2018-12-28', value: 225.46 },{ time: '2018-12-29', value: 323.92 },
        { time: '2018-12-30', value: 222.68 },{ time: '2018-12-31', value: 322.67 },
    ]);
    //END: AREA-SERIES******************************************************        
    // CANDLESTICK-SERIES******************************************************        
    const candlestickSeries = candlestickChart1.addCandlestickSeries({
        priceScaleId: 'left',
        layout: { textColor: 'steelblue', 
        background: { type: 'solid', color: '#000000' } }  ,
        wickUpColor: "#26a69a",
        upColor: "#26a69a",
        wickDownColor: "rgb(225, 50, 85)",
        downColor: "rgb(225, 50, 85)",
    });
    candlestickSeries.setData([
        {time: '2018-12-22', open: 7511.16, high: 8211.84, low: 3611.16, close: 4511.72 },{time: '2018-12-23', open: 4511.12, high: 5311.90, low: 4511.12, close: 4811.09 },
        {time: '2018-12-24', open: 6011.71, high: 6011.71, low: 5311.39, close: 5911.29 },{time: '2018-12-25', open: 6811.26, high: 6811.26, low: 5911.04, close: 6011.50 },
        {time: '2018-12-26', open: 6711.71, high: 10511.85, low: 6611.67, close: 9111.04 },{time: '2018-12-27', open: 9111.04, high: 12111.40, low: 8211.70, close: 11111.40 },
        {time: '2018-12-28', open: 11111.51, high: 14211.83, low: 10311.34, close: 13111.25 },{time: '2018-12-29', open: 13111.33, high: 15111.17, low: 7711.68, close: 9611.43 },
        {time: '2018-12-30', open: 10611.33, high: 11011.20, low: 9011.39, close: 9811.10 },{time: '2018-12-31', open: 10911.87, high: 11411.69, low: 8511.66, close: 11111.26 },
    ]);
    candlestickChart1.timeScale().fitContent();    
    resizeCandlestickChart1();
}; initCandleChart1();

function resizeCandlestickChart1(){
    let frame = document.getElementById('BOOK_VIEW');
    let maxWidth = (frame.offsetWidth>800)?700:(frame.offsetWidth<400)?frame.offsetWidth-40:frame.offsetWidth-80;//(frame.offsetWidth*0.1);
    let maxHeight = (frame.offsetWidth>800)?600:frame.offsetWidth-200;
    if(maxWidth<100 || maxHeight<50){return}
    candlestickChart1.resize(maxWidth, maxHeight);
}
//*************************************************MAIN BASELINE CHART***********
let baselineChart1;
function initBaselineChart1(){
    const chartOptions = { 
        layout: { textColor: 'white', background: { type: 'solid', color: 'black' } },
        grid: { vertLines: { color: "#222" }, horzLines: { color: "#282828" } }, 
    };
    baselineChart1 = LightweightCharts.createChart(document.getElementById('baselineFRAME_XMPL'), chartOptions);
    const baselineSeries = baselineChart1.addBaselineSeries({ baseValue: { type: 'price', price: 25 }, topLineColor: 'rgba( 38, 166, 154, 1)', topFillColor1: 'rgba( 38, 166, 154, 0.28)', topFillColor2: 'rgba( 38, 166, 154, 0.05)', bottomLineColor: 'rgba( 239, 83, 80, 1)', bottomFillColor1: 'rgba( 239, 83, 80, 0.05)', bottomFillColor2: 'rgba( 239, 83, 80, 0.28)' });
    const data = [{ value: 1, time: 1642425322 }, { value: 8, time: 1642511722 }, { value: 10, time: 1642598122 }, { value: 20, time: 1642684522 }, { value: 3, time: 1642770922 }, { value: 43, time: 1642857322 }, { value: 41, time: 1642943722 }, { value: 43, time: 1643030122 }, { value: 56, time: 1643116522 }, { value: 46, time: 1643202922 }];
    baselineSeries.setData(data);
    baselineChart1.timeScale().fitContent();
}; initBaselineChart1(); 

function resizeBaselineChart1(){
    let frame = document.getElementById('baselineFRAME_XMPL');
    let maxWidth = (frame.offsetWidth>800)?700:(frame.offsetWidth<400)?frame.offsetWidth-0:frame.offsetWidth-80;//(frame.offsetWidth*0.1);
    let maxHeight = 100;//(frame.offsetWidth>800)?300:frame.offsetWidth-300;
    if(maxWidth<100){return}
    baselineChart1.resize(maxWidth, maxHeight);
}; resizeBaselineChart1();
//*************************************************END MAIN BASELINE CHART***********
//**EVENT-HANDLERS*****************************************************
window.addEventListener('resize', () => {
    resizeCandlestickChart1();
    resizeBaselineChart1();
});
//**END EVENT-HANDLERS*****************************************************
</script><!--****************************************END CHART IMPLEMENTATION-->
<script async defer> //*********************MAIN_APP**************************
// ******DATES *********************DATES*****************************
// const dateTXTStr = document.getElementById('dateTXTStamp');
// dateTXTStam.innerHTML = new Date().getFullYear();
const currentDate = new Date();
const yearNUM = currentDate.getFullYear();
const monthNUM = (currentDate.getMonth() + 1).toString().padStart(2, '0'); // Adding 1 because months are zero-indexed
const dayNUM = currentDate.getDate().toString().padStart(2, '0');
const current_ymd = `YMD_${yearNUM}_${monthNUM}_${dayNUM}`;
// **** END DATES *****************ENDDATES*********************************
const screenHeight = window.innerHeight;
// console.log("Screen Height:", screenHeight, "px");
// **** END HEIGHT *****************ENDHEIGHT*********************************
// **** VIEWS ********************************VIEWS***********************
const TCKR_VIEW = document.getElementById("TCKR_VIEW");
const BANK_VIEW = document.getElementById("BANK_VIEW");
const BOOK_VIEW = document.getElementById("BOOK_VIEW");
const DATA_VIEW = document.getElementById("DATA_VIEW");
const TCKR_VIEW_BTN = document.getElementById("TCKR_VIEW_BTN");
const BANK_VIEW_BTN = document.getElementById("BANK_VIEW_BTN");
const BOOK_VIEW_BTN = document.getElementById("BOOK_VIEW_BTN");
const DATA_VIEW_BTN = document.getElementById("DATA_VIEW_BTN");
const DATA_GALLERY_FRAME = document.getElementById("DATA_GALLERY_FRAME");
const DATA_TKR_FRAME = document.getElementById("DATA_TKR_FRAME");
const DATA_TRADE_FRAME = document.getElementById("DATA_TRADE_FRAME");
const DATA_EDIT_FRAME = document.getElementById("DATA_EDIT_FRAME");
const DATA_IMPORT_FRAME = document.getElementById("DATA_IMPORT_FRAME");
TCKR_VIEW.classList.add('hiddenTab')     //TAB SWITCH
BANK_VIEW.classList.add('hiddenTab')     //TAB SWITCH
DATA_VIEW.classList.add('hiddenTab')     //TAB SWITCH
BOOK_VIEW_BTN.classList.add('selectedBTN') //TAB DEFAULT handle
BOOK_VIEW.classList.remove('hiddenTab') //TAB DEFAULT handle
// setTimeout(init_BOOKZ_TABZ,3000);
// DATA_GALLERY_FRAME.classList.remove('hiddenTab') //SUB TAB DEFAULT handle
DATA_TKR_FRAME.classList.remove('hiddenTab')     //TAB DEFAULT
load_TKR_FRAME_DATA();
DATA_TRADE_FRAME.classList.add('hiddenTab')     //TAB SWITCH
DATA_EDIT_FRAME.classList.add('hiddenTab')     //TAB SWITCH
DATA_IMPORT_FRAME.classList.add('hiddenTab')     //TAB SWITCH
let EDIT_YMT_RECORD_ID = ''; //persist record editing between views.
let CHART_SELECTIONS = []; //persist chart selections between views. 
let DATA_GALLERY_LIST = `hi there`; 
// ******************************************VIEW METHODS**********
function go_TICKR_VIEW(){ //TAB SWITCH
    remove_VIEW_SELECTED();
    TCKR_VIEW.classList.remove('hiddenTab');     
    TCKR_VIEW_BTN.classList.add('selectedBTN');
    BANK_VIEW.classList.add('hiddenTab');
    BOOK_VIEW.classList.add('hiddenTab');
    DATA_VIEW.classList.add('hiddenTab');
    init_TKRZ_TABZ()
}
function go_BANK_VIEW(){
    remove_VIEW_SELECTED();
    TCKR_VIEW.classList.add('hiddenTab');     
    BANK_VIEW.classList.remove('hiddenTab');
    BANK_VIEW_BTN.classList.add('selectedBTN');
    BOOK_VIEW.classList.add('hiddenTab');
    DATA_VIEW.classList.add('hiddenTab');  
    init_BANKZ_TABZ() 
}
function go_BOOK_VIEW(){
    remove_VIEW_SELECTED();
    TCKR_VIEW.classList.add('hiddenTab');     
    BANK_VIEW.classList.add('hiddenTab');
    BOOK_VIEW.classList.remove('hiddenTab');
    BOOK_VIEW_BTN.classList.add('selectedBTN');
    DATA_VIEW.classList.add('hiddenTab'); 
    init_BOOKZ_TABZ();  
}
function go_DATA_VIEW(){
    remove_VIEW_SELECTED();
    TCKR_VIEW.classList.add('hiddenTab');     
    BANK_VIEW.classList.add('hiddenTab');
    BOOK_VIEW.classList.add('hiddenTab');
    DATA_VIEW.classList.remove('hiddenTab');
    DATA_VIEW_BTN.classList.add('selectedBTN');
}
function remove_VIEW_SELECTED(){
    TCKR_VIEW_BTN.classList.remove('selectedBTN');     
    BANK_VIEW_BTN.classList.remove('selectedBTN');
    BOOK_VIEW_BTN.classList.remove('selectedBTN');
    DATA_VIEW_BTN.classList.remove('selectedBTN');  
}
function getDataGallery(type){
    if(type==='tickr'){
        DATA_TKR_FRAME.classList.remove('hiddenTab');
        load_TKR_FRAME_DATA();     
        DATA_TRADE_FRAME.classList.add('hiddenTab')     
        DATA_EDIT_FRAME.classList.add('hiddenTab')     
        DATA_IMPORT_FRAME.classList.add('hiddenTab')     
    }else if (type==='trade'){
        DATA_TKR_FRAME.classList.add('hiddenTab')     
        DATA_TRADE_FRAME.classList.remove('hiddenTab')   
        load_TRADE_FRAME_DATA();     
        DATA_EDIT_FRAME.classList.add('hiddenTab')     
        DATA_IMPORT_FRAME.classList.add('hiddenTab')    
    }else if(type==='edit'){ 
        DATA_TKR_FRAME.classList.add('hiddenTab')     
        DATA_TRADE_FRAME.classList.add('hiddenTab')     
        DATA_EDIT_FRAME.classList.remove('hiddenTab')   
        load_EDIT_FRAME_DATA();     
        DATA_IMPORT_FRAME.classList.add('hiddenTab')    
    }else if(type==='import'){ 
        DATA_TKR_FRAME.classList.add('hiddenTab')     
        DATA_TRADE_FRAME.classList.add('hiddenTab')     
        DATA_EDIT_FRAME.classList.add('hiddenTab')     
        DATA_IMPORT_FRAME.classList.remove('hiddenTab')    
        load_IMPORT_FRAME_DATA();          
    }
}

function load_TKR_FRAME_DATA(){
    let tkrREC = {}, tkrINPUT, tkrROW, delBTN;
    // let MARGINZ_RENDER_FRAME = document.getElementById('MARGINZ_RENDER_FRAME');
    DATA_TKR_FRAME.innerHTML=''; //blank out
    for(var i=0; i<bankbookz_DB.TICKR_LIST.length;i++){
        tkrREC = bankbookz_DB.TICKR_LIST[i];
        tkrINPUT = document.createElement('input')
        tkrINPUT.value = tkrREC.name;
        tkrINPUT.readOnly = false;
        tkrINPUT.placeholder = "ticker";
        tkrINPUT.classList.add('inputELEM')
        tkrINPUT.style.margin='1em 0 1em 0';
        tkrROW = document.createElement('article')
        tkrROW.classList.add('tkrROWZ')
        tkrROW.appendChild(tkrINPUT)
        delBTN = document.createElement('button')
        delBTN.innerHTML = '🗑️'
        delBTN.classList.add('blackBTN')
        delBTN.addEventListener("click",(e)=>{ deleteTickerClick() });
        tkrROW.appendChild(delBTN)
        DATA_TKR_FRAME.appendChild(tkrROW)  
    }

}
function load_IMPORT_FRAME_DATA(){
        let dynamic_height = '20em';
        dynamic_height = screenHeight-200+'px';        
        let example_txt = `[{"tkr":"XMPL","type":"BUY","mode":"Limit","ymd":"2020_4_3","ymtID":"2020_4_XMPL",
            "amt":"111","shares":"0.0017","price":"64,428.71","role":""},
        {"tkr":"XMPL","type":"BUY","mode":"Market","ymd":"2020_4_3","ymtID":"2020_4_XMPL",
            "amt":"22","shares":"0.0003","price":"66,402.48","role":""},
        {"tkr":"XMPL","type":"BUY","mode":"Market","ymd":"2020_4_3","ymtID":"2020_4_XMPL",
            "amt":"44","shares":"0.0007","price":"66,058.39","role":""}]`;
        DATA_IMPORT_FRAME.innerHTML = 
        `<section style="height:${dynamic_height};width:100%;font-size:0.777em;margin:1%;
            display:flex;flex-direction:column;">
            <header style="margin-bottom:1em;">IMPORT DATA</header>
            <textarea id="importTXT" style="flex: 1 1 0;resize:vertical;background:black; color:lime; width: 91%; 
                box-shadow: 0px 0px 8px purple; max-height: 500px;padding: 4%; border-radius: 13px;">
                ${example_txt}</textarea> 
            <footer class="main_footer" style="display:flex;justify-content: flex-end;padding: 1em;height: 2em;font-size: 1.333em;">
                <button class="BTN" style="background:forestgreen" onclick="import_BTNClick()">IMPORT</button>
            </footer>   
        </section>`;
    DATA_EDIT_FRAME.classList.add('hiddenTab')     
    DATA_IMPORT_FRAME.classList.remove('hiddenTab')     
    DATA_GALLERY_FRAME.classList.add('hiddenTab') 
}

</script><!--*******************************END VIEW structure LOGIC-->
<script async defer>  //********TAB VIEW LOGIC**************************
//*********************TICKRZ-LOGIC**********************/
const init_TKRZ_TABZ = ()=>{
    let tkrREC = {}, tkrINPUT, tkrROW;
    let TKR_RENDER_FRAME = document.getElementById('TKR_RENDER_FRAME');
    TKR_RENDER_FRAME.innerHTML=''; //blank out
    for(var i=0; i<bankbookz_DB.TICKR_LIST.length;i++){
        tkrREC = bankbookz_DB.TICKR_LIST[i];
        tkrINPUT = document.createElement('input')
        tkrINPUT.value = tkrREC.name;
        tkrINPUT.readOnly = false;
        tkrINPUT.placeholder = "ticker";
        tkrINPUT.classList.add('inputELEM')
        tkrINPUT.style.margin='1em 0 1em 0';
        tkrROW = document.createElement('article')
        tkrROW.classList.add('tkrROWZ')
        tkrROW.appendChild(tkrINPUT)
        delBTN = document.createElement('button')
        delBTN.innerHTML = '🗑️'
        delBTN.classList.add('blackBTN')
        delBTN.addEventListener("click",(e)=>{ deleteTickerClick() });
        tkrROW.appendChild(delBTN)
        TKR_RENDER_FRAME.appendChild(tkrROW)  
    }
}
const add_TKRZ_Click = ()=>{ }

//*********************END TKRZ- TAB - LOGIC**********************/
//*********************BANKZ- TAB - LOGIC**********************/
const init_BANKZ_TABZ = ()=>{
    let tkrREC = {}, tkrINPUT, tkrROW, delBTN;
    let MARGINZ_RENDER_FRAME = document.getElementById('MARGINZ_RENDER_FRAME');
    MARGINZ_RENDER_FRAME.innerHTML=''; //blank out
    for(var i=0; i<bankbookz_DB.TICKR_LIST.length;i++){
        tkrREC = bankbookz_DB.TICKR_LIST[i];
        tkrINPUT = document.createElement('input')
        tkrINPUT.value = tkrREC.name;
        tkrINPUT.readOnly = false;
        tkrINPUT.placeholder = "ticker";
        tkrINPUT.classList.add('inputELEM')
        tkrINPUT.style.margin='1em 0 1em 0';
        tkrROW = document.createElement('article')
        tkrROW.classList.add('tkrROWZ')
        tkrROW.appendChild(tkrINPUT)
        delBTN = document.createElement('button')
        delBTN.innerHTML = '🗑️'
        delBTN.classList.add('blackBTN')
        delBTN.addEventListener("click",(e)=>{ deleteTickerClick() });
        tkrROW.appendChild(delBTN)
        MARGINZ_RENDER_FRAME.appendChild(tkrROW)  
    }
}
// const add_BANKZ_Click = ()=>{ }
//*********************END BANKZ- TAB - LOGIC**********************/
</script><!--*******************************END VIEW structure LOGIC-->
<script async defer>  //*********************BOOKZ-LOGIC**********************/
//*********************BOOKZ- TAB - LOGIC**********************/
const init_BOOKZ_TABZ = ()=>{
    let BOOKZ_RENDER_FRAME = document.getElementById('BOOKZ_RENDER_FRAME');
    BOOKZ_RENDER_FRAME.innerHTML=''; //blank out
    let bookFrame_Model = ``, tgtTKR={};
    for(var i=0; i< bankbookz_DB.TICKR_LIST.length; i++){
        tgtTKR = bankbookz_DB.TICKR_LIST[i];
        bookFrame_Model = `
        <section id="BOOKFRAME_${tgtTKR.name}" class="BOOKFRAME_Item">
                <header class="mainTitle expanderROW">
                    <span>${tgtTKR.name}</span>
                    <span class="expanderBTN" style="font-size:0.777em;" onclick="expander_BOOKZ_Click(event)">✧</span>
                </header>
                <menu style="justify-content: space-evenly; border-radius: 13px; flex: 1 1 0%; display: flex; 
                    margin-top: 0;padding: 0.222em 0px; width: 66.666%; align-self: center;">
                    <span>
                        <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                        margin-right: 0.5em;"></div>
                        <span style="font-size:0.444em;">PRICE</span>
                    </span>
                    <span>
                        <div style="background:#2962ff;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                        margin-right: 0.5em;"></div>
                        <span style="font-size:0.444em;">PROFITnLOSS</span>
                    </span>
                </menu>
                <article id="candlestickFRAME_${tgtTKR.name}" class="dynamicCandleStick" style="justify-content:center;
                    flex:1; display:flex;border:solid 1px steelblue;border-radius:22.222px;width:98%">
                    <i>Loading...</i>
                </article>
                <section style="justify-content: center;margin-top:1em;flex-direction: column; padding:0 2% 0 2%;
                border-radius: 13px; flex:1; display:flex;border:solid 1px teal;width:90%;margin: 1em auto;">
                    <header class="expanderROW">
                        <span class="expanderTITLE">PnL:</span>
                        <span class="expanderBTN" onclick="MINMAX(event.target)">✧</span>
                    </header>
                    <article id="baselineFRAME_${tgtTKR.name}" class="dynamicBaseline" style="display:flex;justify-content:center;flex:1;">
                    </article>
                    <footer style="font-size:0.888em;margin-bottom:1em;display:flex;
                        justify-content:space-between; padding: 0em 3em 0 2em">
                        <span>
                            <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                            margin-right: 0.5em;"></div>                        
                            <span style="font-size:0.666em;margin-top: 0.333em;color:steelblue">PnL:</span>
                            <span style="font-size:0.666em;">234</span>
                        </span>
                        <span>
                            <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                            margin-right: 0.5em;"></div>
                            <span style="font-size:0.666em;">BOOK:</span>
                            <span style="font-size:0.666em;">1,234</span>
                        </span>
                        <span>
                            <div style="background:#26a69a;border-radius:100%;border:solid 1px steelblue;height:0.5em;width:0.5em;display: inline-block;
                            margin-right: 0.5em;"></div>
                            <span style="font-size:0.666em;">BANK:</span>
                            <span style="font-size:0.666em;">444</span>
                        </span>
                    </footer>                  
                </section>            
                <menu id="dataFRAME_${tgtTKR.name}" class="FRAME" style="justify-content: center;
                    border-radius: 13px; flex:1; display:flex;flex-direction: column;padding-top: 0.111em;padding-bottom: 0.222em;">
                    <header class="expanderROW">
                        <span class="expanderTITLE">METADATA:</span>
                        <span class="expanderBTN" onclick="MINMAX(event.target)">✴</span>
                    </header>
                    <section style="display:none;">...</section>
                </menu>
            </section><!--end BOOKFRAME-->         
        `;
        // <menu id="btnFRAME_${tgtTKR.name}" class="FRAME" style="justify-content:space-evenly;
        //             border-radius: 13px; flex:1; display:flex;padding:0.222em 0 0.222em 0;
        //             width: 66.666%;align-self: center; margin: 0.666em auto;">
        //             <button class="BTN">Btn1</button>
        //             <button class="BTN">Btn2</button>
        //             <button class="BTN">Btn3</button>
        //         </menu>
        BOOKZ_RENDER_FRAME.innerHTML += bookFrame_Model; 
    }//END BUILD LOOP
    init_BOOKZ_EXPANDER();
    setTimeout(render_ALL_BOOKZ_CHARTZ,222);

};init_BOOKZ_TABZ();
function render_ALL_BOOKZ_CHARTZ(){
    let tgt_Candle; //Render all CANDLESTICK DYNA_CHARTZ
    const All_DynaCandles = document.getElementsByClassName('dynamicCandleStick')
    DYNA_CHART_CANDLES = []; //blank out. for screen resize
    for(var i=0; i<All_DynaCandles.length;i++){
        tgt_Candle = All_DynaCandles[i];
        init_DYNA_CHART_Candle(tgt_Candle);
    }
    let tgt_Baseline; //Render all BASELINE DYNA_CHARTZ
    const All_Dynabaselines = document.getElementsByClassName('dynamicBaseline')
    DYNA_CHART_BASELINES = []; //blank out. for screen resize
    for(var j=0; j<All_Dynabaselines.length;j++){
        tgt_Baseline = All_Dynabaselines[j];
        init_DYNA_CHART_Baseline(tgt_Baseline);
    }    
}
// const add_BOOKZ_Click = ()=>{ }
function init_BOOKZ_EXPANDER(){ //collapse all BOOKZ except expanded tabs in local storage,
    let tgtTKR='',viewTKR='',viewID='',expanded=false, tgtBTN;
    const allBookz = document.getElementsByClassName('BOOKFRAME_Item');
    for(var j=0; j<allBookz.length;j++){ //collapse all except selected.
        viewID = viewTKR=allBookz[j].id;
        if(!viewID){continue}
        viewID = viewID.split('_')[1]
        if(!viewID){continue}
        expanded = false;
        for(var i=0; i<bankbookz_DB.METASTATE.BOOKZ_EXPANDER.length;i++){
            tgtTKR=bankbookz_DB.METASTATE.BOOKZ_EXPANDER[i];
            if(viewID===tgtTKR){ expanded = true; break; }
        }
        tgtBTN = allBookz[j].children[0].children[1];
        if(expanded){
            loadBookSelection(viewID);
            MINMAX(tgtBTN,expanded);
        }else if(!expanded){
            MINMAX(tgtBTN,expanded);
        }
    }
}; 
function expander_BOOKZ_Click(e){
    let TGT = e.target;
    MINMAX(TGT);
    saveBookSelection(TGT);
    let CURR_STATE = TGT.innerHTML;
    if(CURR_STATE!='✴'){//only load on expand (collapse icon)
        let viewID = TGT.parentElement.parentElement.id;
        let viewTKR = viewID.split('_')[1];    
        loadBookSelection(viewTKR);
    }
}
function loadBookSelection(viewTKR){
    if(viewTKR==='XMPL'){return}
    console.log('LOAD DATA',viewTKR)
}
function saveBookSelection(TGT){
    let CURR_STATE = TGT.innerHTML;
    let viewID = TGT.parentElement.parentElement.id;
    let viewTKR = viewID.split('_')[1];
    let lookupIDX = bankbookz_DB.METASTATE.BOOKZ_EXPANDER.indexOf(viewTKR)
    if(CURR_STATE==='✴'){ //add singular to BOOKZ_EXPANDER
        if(lookupIDX>-1){
            bankbookz_DB.METASTATE.BOOKZ_EXPANDER.splice(lookupIDX,1)
            save_BANKBOOKZ_DB();
        }
    }else{ //remove from BOOKZ_EXPANDER.
        if(lookupIDX<0){
            bankbookz_DB.METASTATE.BOOKZ_EXPANDER.push(viewTKR)
            save_BANKBOOKZ_DB();
        }
    }
}
// ******************************************END VIEW METHODS**********
// **** END VIEWS ****************************END VIEWS***************************

</script><!--*****************************END MAIN_APP******************-->

<script async defer>/****************************************CRYPTO OHLCV API***********/

let stock_api_key = null;//API_KEY - set in local storage.
let keyBOX = document.getElementById('keyBOX');
let keyINPUT = document.getElementById('keyINPUT');  

let init_api_key = ()=>{
   if(localStorage.stock_api_key){
        stock_api_key = localStorage.stock_api_key;
        let status = document.getElementById('connectStatus')
        status.innerHTML='CONNECTED'        
   }
}; init_api_key();

let setAPIKEY = ()=>{
   if(keyINPUT.value){
        stock_api_key = keyINPUT.value;
        localStorage.stock_api_key = stock_api_key;
        let status = document.getElementById('connectStatus')
        status.innerHTML='CONNECTED'
   }
}; 

// let init_monthly = ()=>{
//    if(!stock_api_key){return;}
//    debugger;
//    if(localStorage.monthly_NVDA_data){ //LOAD FROM LOCAL not API.
//          monthly_data = JSON.parse(localStorage.monthly_NVDA_data);
//          // let, val_ath=0,val_atl=0,curr_price=0,perc_off_ath=0;
//          let data_keys = Object.keys(monthly_data);
//          for(let i=0; i<data_keys.length;i++){
//             daily_data = monthly_data[data_keys[i]];
//             if(parseFloat(daily_data["2. high"]) > calculate_ATH){
//                calculate_ATH = parseFloat(daily_data["2. high"])
//             }
//             if(parseFloat(daily_data["3. low"]) < calculate_ATL || calculate_ATL===0){
//                calculate_ATL = parseFloat(daily_data["3. low"])
//             }
//          }
//          console.log('ATH:',calculate_ATH)
//          console.log('ATL:',calculate_ATL)
//          console.log('Curr Price:', current_PRICE)
//          console.log('%off ATH', perc_off_ath)
//          return;
//    }
//    // const apiKey = '';
//    // const symbol = 'NVDA';
//    const apiUrl = `https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY_ADJUSTED&symbol=${target_SYMBOL}&apikey=${stock_api_key}`;
//    fetch(apiUrl)
//    .then(response => response.json())
//    .then(data => {
//          localStorage.monthly_NVDA_data = JSON.stringify(data["Monthly Adjusted Time Series"]);

//    })
//    .catch(error => {
//          console.error('Error fetching data:', error);
//    });
// }; //init_monthly();

const getCrypto_Quotes = async (queries)=>{
let url = `https://www.alphavantage.co/query?function=DIGITAL_CURRENCY_DAILY&symbol=BTC&market=USD&interval=5min&apikey=${stock_api_key}`;
// fetch(queries[i].url).then((data)=>{
fetch(url).then((data)=>{
            if(data.ok){
               return data.json();
            } else{ debugger; }
         }).then((tickResp)=>{
             let tickDaily = tickResp["Time Series (Digital Currency Daily)"]
             let chartFormat = formatCryptoDaily_to_ChartJS(tickDaily);
             save_NEW_CRYPTO_DAILY(chartFormat); //skip duplicates

         }).catch((error)=>{
            debugger;
            // showErrorMSG('🛠️ bad request')
            console.log(error)
         })
}
// const getData_Quotes = async (queries)=>{
// //    if(!stock_api_key){ showErrorMSG('🛠️ connect api'); return;}
//    if(!queries.length){return;}
//    try{
//       for(let i=0; i<queries.length;i++){
//          console.log('Query:',queries[i].tkr)
//          //CRYPTO QUERIES-----------------------------------
//          if(queries[i].tkr==='BTC' 
//             || queries[i].tkr==='ETH'  
//             || queries[i].tkr==='LTC'  
//             || queries[i].tkr==='AVAX' ){
//             console.log('Crypto Query:',queries[i].tkr)
//             //getCryptoPriceQuery(); //TODO
//             continue;
//          }
//          //END CRYPTO QUERIES-----------------------------------
//          fetch(queries[i].url).then((data)=>{
//             if(data.ok){
//                return data.json();
//             } else{ debugger; }
//          }).then((tickData)=>{
//             debugger;
//             let xmpl = tickData["Weekly Adjusted Time Series"]["2024-06-18"]
//             // if(tickData.Information && tickData.Information.indexOf('Thank you')===0){
//             //    showErrorMSG('🛠️ api daily limit');
//             //    debugger;
//             //    return;
//             // }
//             // if(!tickData || !tickData["Meta Data"] || !tickData["Meta Data"]["2. Symbol"] ){
//             //    debugger; //todo
//             // }
//             // let responseTick = tickData["Meta Data"]["2. Symbol"];
//             // if(!responseTick){return;}
//             // let latestClose = tickData["Time Series (5min)"][Object.keys(tickData["Time Series (5min)"])[0]]["4. close"];
//             // if(!latestClose){return;}
//             // console.log(responseTick,"last close",latestClose)
//             // updateLatestTickPrice(responseTick,latestClose);
//             //SHOW CONNNECTED and CAP, hide disconnected and key input
//             // stateConnectedBox.style.display = "inline";
//             // stateNotConnectedBox.style.display = "none";   
//             // keyBOX.style.display = "none"; 
//             // latestBtn1.style.display = "none"; //do not call twice. because of limit
//             // localStorage.ai_ledger = JSON.stringify(ai_ledger) //SAVE to LOCAL STORAGE
//             // initEncode(); //RELOAD VIEW. 

//          }).catch((error)=>{
//             debugger;
//             // showErrorMSG('🛠️ bad request')
//             console.log(error)
//          })
//       }
//    } catch(error) {
//         //  showErrorMSG('🛠️ api down')
//    }           
// }


// const getLastPriceClick = ()=>{ //loop all for last close.
//    let item={},queries=[];//urls=[];
// //    for(let i=0;i<ai_ledger.ticks.length;i++){
//       // if(i>=1){continue;}//DEV_limiter stay below 20
//     //   item = ai_ledger.ticks[i];
//     debugger;
//       item.tick = 'NVDA';//DEV_specifier 
//       item.url =  `https://www.alphavantage.co/query?function=TIME_SERIES_WEEKLY_ADJUSTED&symbol=${item.tick}&apikey=${stock_api_key}`;
//       // urls.push(`https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${item.tick}&interval=5min&apikey=${stock_api_key}`)
//     //   queries.push({tkr:item.tick,url:`https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${item.tick}&interval=5min&apikey=${stock_api_key}`})
//       queries.push({tkr:item.tick,url:item.url})
// //    }
//    // if(stock_api_key && urls.length){
//    if(stock_api_key && queries.length){
//       getData_Quotes(queries)
//     //   showErrorMSG('🌼DATA UPDATED🌼') //todo error. need show message not error.
//    } else {
//     //   showErrorMSG('🛠️ connect api key'); 
//    }
// }; //getLastPriceClick();
</script><!--*****************************END STOCK DATA API******************-->
<!--***************************** STOCK API INPUT******************-->
<footer style="display:flex;border: solid 1px steelblue;
border-radius: 13px;padding: 2px 6px;color: #022e64;align-items: center;    margin: 1% 0% 0% 0;
justify-content: space-between;
">
    <section id="keyBOX" style="display:flex;border: solid 1px steelblue;
    border-radius: 13px;padding: 2px 6px;color: #022e64;align-items: center;
    margin:1%;">
        API:<input id="keyINPUT"  type="password" placeholder="api_key" 
        style="margin-left: 1em; background:#233453;
        border-radius: 10px 0px 0px 10px;"></input>
        <button style="margin-right: 1em; background:#03cbcb;cursor:pointer;
        border-radius: 0px 10px 10px 0px; font-size:0.777em;padding: 4px;" onclick="setAPIKEY();">SET</button>
    </section>  
    <section id="connectStatus" style="font-size: 0.666em;margin-right:2%;color:aqua;">disconnected</section>
</footer>
<!--***************************** END STOCK API INPUT******************-->
<legal style="color:darkslategray;font-size: 0.444em;margin: 3.333em 10% 0 10%;
background-color: rgb(9, 0, 18);border-radius: 13px;padding: 1.444em;">
    <div style="margin-top:0;margin-bottom:0em;">
        2020 - <span id="dateTXTStamp"></span><script>
            const dateTXTStamp = document.getElementById('dateTXTStamp');
            dateTXTStamp.innerHTML = new Date().getFullYear();</script> BANKBOOKZ&#8482; by © NetCinematics llc. All rights reserved.
            See License. DESCRIPTION: Template for Personal_Ledger_System. 
            Generative Data Visualization for ARTIFICIAL INTELLIGENCE.
            Charts by <a href="https://www.tradingview.com/">Trading View</a> ♥ ~:).
    </div>
</legal>
<!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
</body>
</html>